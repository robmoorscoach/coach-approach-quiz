<!doctype html>
<html lang="en-GB">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>The Coach Approach | Leadership Profile</title>
  <style>
    :root{
      --bg:#071624;
      --panel:#0b2136;
      --panel2:#0a1c2d;
      --stroke:rgba(255,255,255,.10);
      --stroke2:rgba(255,255,255,.14);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.68);
      --muted2:rgba(255,255,255,.55);
      --orange:#ff8a00;
      --orange2:#ffb35c;
      --ice:rgba(255,255,255,.10);
      --shadow: 0 18px 50px rgba(0,0,0,.45);
      --radius:18px;
      --radius2:14px;
      --maxw:1100px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      background: radial-gradient(1200px 600px at 20% 0%, rgba(255,138,0,.12), transparent 55%),
                  radial-gradient(1000px 700px at 80% 20%, rgba(80,160,255,.12), transparent 55%),
                  linear-gradient(180deg, #071624, #04101b);
      color:var(--text);
    }

    a{color:inherit}
    .wrap{
      max-width:var(--maxw);
      margin:0 auto;
      padding:22px 18px 36px;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--stroke);
      border-radius: 26px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .top{
      padding:26px 26px 18px;
      background: linear-gradient(180deg, rgba(11,33,54,.95), rgba(9,27,45,.92));
      border-bottom:1px solid var(--stroke);
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:6px 12px;
      border-radius:999px;
      background: rgba(255,138,0,.14);
      border:1px solid rgba(255,138,0,.25);
      color: rgba(255,255,255,.92);
      font-weight:700;
      letter-spacing:.02em;
      font-size:12px;
      text-transform:uppercase;
    }

    h1{
      margin:10px 0 10px;
      font-size:34px;
      line-height:1.1;
      letter-spacing:-.02em;
    }
    .lead{
      margin:0;
      color:var(--muted);
      line-height:1.55;
      max-width: 980px;
    }

    .topbar{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:18px;
      flex-wrap:wrap;
      margin-top:18px;
    }

    .metaRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      color:var(--muted);
      font-size:14px;
    }

    .metaBox{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      padding:10px 12px;
      border-radius: 14px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      min-width: 320px;
    }

    .input{
      width: 280px;
      max-width: 100%;
      padding:10px 12px;
      border-radius: 12px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.18);
      color: var(--text);
      outline:none;
    }
    .input:focus{border-color: rgba(255,138,0,.35); box-shadow: 0 0 0 4px rgba(255,138,0,.12)}

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
    }

    button{
      font-family:inherit;
      cursor:pointer;
      border:1px solid var(--stroke2);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding:10px 14px;
      border-radius: 999px;
      font-weight:650;
      transition: transform .05s ease, background .15s ease, border-color .15s ease;
    }
    button:hover{background: rgba(255,255,255,.09)}
    button:active{transform: translateY(1px)}
    .btn-orange{
      background: rgba(255,138,0,.14);
      border-color: rgba(255,138,0,.35);
    }
    .btn-orange:hover{background: rgba(255,138,0,.18)}
    .btn-ghost{
      background: transparent;
      border-color: var(--stroke2);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:18px;
      padding:18px;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
      .actions{justify-content:flex-start}
      .metaBox{min-width:100%}
    }

    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.025));
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      padding:18px;
    }
    .panel h2{
      margin:0 0 8px;
      font-size:18px;
      letter-spacing:-.01em;
    }
    .panel p{margin:0; color:var(--muted); line-height:1.55}

    .note{
      margin-top:12px;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(120,170,255,.25);
      background: rgba(120,170,255,.08);
      color: rgba(255,255,255,.80);
      line-height:1.45;
    }

    .survey{
      padding: 18px;
      border-radius: var(--radius);
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.14);
      margin-top:12px;
    }

    .q{
      padding:14px 14px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      margin-bottom:12px;
    }
    .qtitle{
      font-weight:700;
      margin:0 0 8px;
      line-height:1.35;
    }
    .qsub{
      margin:0 0 10px;
      color:var(--muted2);
      font-size:13px;
    }

    .scale{
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap:10px;
      margin-top:8px;
    }

    /* Hide the native radio */
    .scale input{display:none}

    .opt{
      display:flex;
      align-items:center;
      justify-content:center;
      padding:12px 10px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.16);
      color: rgba(255,255,255,.90);
      font-weight:800;
      user-select:none;
      transition: background .12s ease, border-color .12s ease, transform .05s ease;
    }
    .opt:hover{background: rgba(255,255,255,.06)}
    .scale input:checked + .opt{
      background: rgba(255,138,0,.18);
      border-color: rgba(255,138,0,.55);
      box-shadow: 0 0 0 4px rgba(255,138,0,.10) inset;
    }

    .warn{
      display:none;
      margin-top:12px;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid rgba(255,90,90,.28);
      background: rgba(255,90,90,.10);
      color: rgba(255,255,255,.88);
      line-height:1.45;
    }

    .buildRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
      align-items:center;
      justify-content:flex-start;
    }

    .progressRow{
      display:flex;
      align-items:center;
      gap:10px;
      margin-top:14px;
      color:var(--muted);
      font-size:13px;
    }
    .barOuter{
      flex:1;
      height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
    }
    .barInner{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(255,138,0,.95), rgba(255,184,90,.85));
    }

    /* Report */
    #report{display:none; padding:18px}
    .reportTop{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
      flex-wrap:wrap;
      padding: 14px 16px;
      border-radius: 18px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.03);
      margin-bottom: 14px;
    }
    .reportTitle{
      display:flex;
      flex-direction:column;
      gap:6px;
      min-width: 280px;
    }
    .reportTitle strong{font-size:18px}
    .reportTitle span{color:var(--muted); font-size:13px}

    .reportActions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .reportGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
    }
    @media (max-width: 980px){
      .reportGrid{grid-template-columns:1fr}
    }

    .kpi{
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .snapLine{
      color:var(--muted);
      line-height:1.5;
      font-size:14px;
    }
    .snapLine b{color:rgba(255,255,255,.92)}
    .mini{color:var(--muted2); font-size:12px; line-height:1.45}

    .energyBars{
      margin-top:10px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .eRow{
      display:grid;
      grid-template-columns: 90px 1fr 52px;
      gap:10px;
      align-items:center;
      font-size:13px;
      color:rgba(255,255,255,.88);
    }
    .eName{font-weight:700; color:rgba(255,255,255,.88)}
    .ePct{color:rgba(255,255,255,.75); text-align:right; font-weight:700}
    .eBarOuter{
      height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
    }
    .eBarInner{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(255,138,0,.95), rgba(255,184,90,.80));
    }

    .chartBox{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    canvas{
      width:100%;
      height:260px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.14);
    }

    .subhead{
      margin:0;
      font-size:13px;
      color:var(--muted);
      line-height:1.45;
    }

    .sectionTitle{
      margin:0 0 6px;
      font-size:16px;
    }

    ul{margin:10px 0 0 18px; color:rgba(255,255,255,.84)}
    li{margin:6px 0}

    .callout{
      margin-top:12px;
      padding:12px 14px;
      border-radius: 14px;
      border:1px solid rgba(120,170,255,.22);
      background: rgba(120,170,255,.07);
      color:rgba(255,255,255,.82);
      line-height:1.45;
    }

    .coachBox{
      margin-top:10px;
      padding:12px 14px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.86);
      line-height:1.5;
      font-size:13px;
    }
    .coachBox b{color:var(--orange); font-weight:850}

    .plan{
      border:1px solid rgba(255,138,0,.26);
      background: rgba(255,138,0,.06);
      border-radius: 18px;
      padding:14px;
      margin-top:8px;
    }
    .plan h3{
      margin:0 0 8px;
      font-size:14px;
      letter-spacing:.01em;
      color:rgba(255,255,255,.90);
    }
    .plan p{margin:8px 0 0; color:rgba(255,255,255,.82)}
    .plan .mini{margin-top:10px}

    .footerActions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-start;
      margin-top:12px;
    }

    .linkBtn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid var(--stroke2);
      background: rgba(255,255,255,.06);
      text-decoration:none;
      font-weight:700;
      color:var(--text);
    }
    .linkBtn:hover{background: rgba(255,255,255,.09)}

    /* Sticky “tiny scroll” fix: allow natural scroll */
    body{overflow-y:auto}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card" id="app">
      <div class="top">
        <span class="pill">THE COACH APPROACH</span>
        <h1>Leadership Profile</h1>
        <p class="lead">
          A deeper profiling survey built around the four leadership energies in The Coach Approach:
          <b>Command</b>, <b>Control</b>, <b>Clarity</b> and <b>Connection</b>.
          You’ll receive an on-page report with charts, strengths, watchouts, under-pressure patterns, your Leadership Approach, and a 30-day experiment plan.
        </p>

        <div class="topbar">
          <div class="metaBox">
            <div style="display:flex; flex-direction:column; gap:6px; min-width:260px;">
              <div class="mini">Name (optional, used for the report)</div>
              <input class="input" id="name" placeholder="Your name" />
            </div>
            <div style="display:flex; flex-direction:column; gap:6px; flex:1; min-width:240px;">
              <div class="mini">Scale: 1 (Strongly disagree) → 5 (Strongly agree)</div>
              <div class="metaRow">
                <span class="pill" style="background:rgba(255,255,255,.05); border-color:rgba(255,255,255,.12); color:rgba(255,255,255,.86)">40 questions</span>
                <span class="pill" style="background:rgba(255,255,255,.05); border-color:rgba(255,255,255,.12); color:rgba(255,255,255,.86)">Instant report</span>
                <span class="pill" style="background:rgba(255,255,255,.05); border-color:rgba(255,255,255,.12); color:rgba(255,255,255,.86)">Print / Save as PDF</span>
              </div>
            </div>
          </div>

          <div class="actions">
            <button class="btn-orange" id="build">Generate report</button>
            <button class="btn-ghost" id="jumpReport" style="display:none;">Jump to report</button>
            <a class="linkBtn" href="https://robmoors.com/the-coach-approach" target="_blank" rel="noopener">Talk about The Coach Approach</a>
          </div>
        </div>
      </div>

      <div class="grid">
        <!-- Survey -->
        <div class="panel">
          <h2>Your survey</h2>
          <p>Answer honestly based on your day-to-day leadership behaviour. If you’re between two scores, choose the one you do more often.</p>

          <div class="survey" id="questions"></div>

          <div class="warn" id="warn">
            Please answer all questions before generating your report.
          </div>

          <div class="progressRow">
            <span id="progressText">0 / 40 answered</span>
            <div class="barOuter"><div class="barInner" id="progressBar"></div></div>
          </div>

          <div class="buildRow">
            <button class="btn-orange" id="build2">Generate report</button>
            <button class="btn-ghost" id="reset">Reset answers</button>
          </div>
        </div>

        <!-- What you'll get -->
        <div class="panel">
          <h2>What you’ll get</h2>
          <p><b style="color:var(--orange)">A premium Leadership Profile report</b> that helps you:</p>
          <ul>
            <li>Understand your dominant and secondary leadership energies</li>
            <li>Spot your underused energy (and why it matters)</li>
            <li>See what you tend to do under pressure</li>
            <li>Identify your Leadership Approach (Manage, Inspire, Lead, Guide)</li>
            <li>Get Mindset, Toolset and Skillset guidance</li>
            <li>Walk away with a 30-day experiment plan</li>
          </ul>

          <div class="note">
            <b>Reminder:</b> this is not a label. It’s a mirror. The goal is flexibility: choosing the right energy for the situation, not repeating the same pattern.
          </div>
        </div>
      </div>

      <!-- Report -->
      <div id="report">
        <div class="reportTop">
          <div class="reportTitle">
            <strong>Leadership Profile Report</strong>
            <span id="meta"></span>
          </div>

          <div class="reportActions">
            <button class="btn-ghost" id="printBtnTop">Print / Save as PDF</button>
            <button class="btn-ghost" id="copyBtnTop">Copy summary</button>
            <button class="btn-orange" id="exportBtnTop">Export Results Data</button>
            <a class="linkBtn" href="https://robmoors.com/contact-me" target="_blank" rel="noopener">Contact Rob</a>
          </div>
        </div>

        <div class="reportGrid">
          <!-- Snapshot -->
          <div class="panel kpi">
            <h2>Snapshot</h2>
            <div class="snapLine" id="snapshot"></div>

            <div class="energyBars">
              <div class="eRow">
                <div class="eName">Command</div>
                <div class="eBarOuter"><div class="eBarInner" id="barCommand"></div></div>
                <div class="ePct" id="pctCommand"></div>
              </div>
              <div class="eRow">
                <div class="eName">Control</div>
                <div class="eBarOuter"><div class="eBarInner" id="barControl"></div></div>
                <div class="ePct" id="pctControl"></div>
              </div>
              <div class="eRow">
                <div class="eName">Clarity</div>
                <div class="eBarOuter"><div class="eBarInner" id="barClarity"></div></div>
                <div class="ePct" id="pctClarity"></div>
              </div>
              <div class="eRow">
                <div class="eName">Connection</div>
                <div class="eBarOuter"><div class="eBarInner" id="barConnection"></div></div>
                <div class="ePct" id="pctConnection"></div>
              </div>
            </div>

            <div class="callout" id="balanceNote"></div>
          </div>

          <!-- Chart -->
          <div class="panel chartBox">
            <h2>Your energy map</h2>
            <canvas id="radar" width="600" height="320"></canvas>
            <p class="subhead">
              The radar shows your four energies together. A larger shape suggests stronger preference.
              A more even shape suggests flexibility across situations.
            </p>
          </div>

          <!-- At your best -->
          <div class="panel">
            <h2>At your best</h2>
            <p class="subhead" id="bestTitle"></p>
            <ul id="bestList"></ul>
          </div>

          <!-- Watchouts -->
          <div class="panel">
            <h2>Watchouts</h2>
            <p class="subhead" id="watchTitle"></p>
            <ul id="watchList"></ul>
          </div>

          <!-- Under pressure -->
          <div class="panel">
            <h2>Under pressure</h2>
            <p id="pressureText"></p>
            <div class="callout" id="resetRoutine"></div>
          </div>

          <!-- Coach guidance -->
          <div class="panel">
            <h2>Your Coach Approach guidance</h2>
            <p class="subhead" id="approachLine"></p>

            <div class="coachBox" id="coachBox"></div>
          </div>

          <!-- Plan -->
          <div class="panel" style="grid-column:1 / -1;">
            <h2>30-day experiment plan</h2>
            <div class="plan" id="plan"></div>

            <div class="footerActions">
              <button class="btn-ghost" id="printBtnBottom">Print / Save as PDF</button>
              <button class="btn-ghost" id="copyBtnBottom">Copy summary</button>
              <button class="btn-orange" id="exportBtnBottom">Export Results Data</button>

              <a class="linkBtn" href="https://robmoors.com/contact-me" target="_blank" rel="noopener">Bring this into coaching</a>
              <a class="linkBtn" href="#app" id="backTop">Back to top</a>
            </div>

            <p class="mini" style="margin-top:10px;">
              Report generated locally in your browser. If you want to keep it, use Print / Save as PDF.
            </p>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    // ============================================================
    // Questions (40 total, 10 per energy)
    // ============================================================
    const ENERGIES = ["command","control","clarity","connection"];

    const QUESTIONS = [
      // Command (10)
      { id: 1,  e:"command",   t:"I’m comfortable making the call when a decision is needed." },
      { id: 2,  e:"command",   t:"I step in quickly when progress stalls." },
      { id: 3,  e:"command",   t:"I’m comfortable challenging poor performance directly." },
      { id: 4,  e:"command",   t:"When pace matters, I step in and take charge." },
      { id: 5,  e:"command",   t:"I say what needs saying, even if it’s uncomfortable." },
      { id: 6,  e:"command",   t:"I can hold firm when others disagree." },
      { id: 7,  e:"command",   t:"I make decisions quickly when others hesitate." },
      { id: 8,  e:"command",   t:"I’m clear and direct about what needs to happen next." },
      { id: 9,  e:"command",   t:"I can have difficult conversations without avoiding them." },
      { id: 10, e:"command",   t:"I take responsibility for making the tough calls." },

      // Control (10)
      { id: 11, e:"control",   t:"I set clear expectations and hold people to them." },
      { id: 12, e:"control",   t:"I focus on outcomes and deadlines as the priority." },
      { id: 13, e:"control",   t:"I like having a clear plan and process." },
      { id: 14, e:"control",   t:"I follow through and make sure actions happen." },
      { id: 15, e:"control",   t:"I bring structure when things feel messy." },
      { id: 16, e:"control",   t:"I prefer clarity on roles, responsibilities and ownership." },
      { id: 17, e:"control",   t:"I track progress and keep work on course." },
      { id: 18, e:"control",   t:"I make work feel manageable by defining the steps." },
      { id: 19, e:"control",   t:"I’m consistent, reliable and organised." },
      { id: 20, e:"control",   t:"I reduce risk by getting the basics right." },

      // Clarity (10)
      { id: 21, e:"clarity",   t:"I help people see the bigger picture and the ‘why’." },
      { id: 22, e:"clarity",   t:"I simplify complexity into clear priorities." },
      { id: 23, e:"clarity",   t:"I’m good at turning ideas into direction." },
      { id: 24, e:"clarity",   t:"I communicate purpose in a way that motivates people." },
      { id: 25, e:"clarity",   t:"I help teams align around what matters most." },
      { id: 26, e:"clarity",   t:"I keep conversations focused on what success looks like." },
      { id: 27, e:"clarity",   t:"I can explain things clearly so people ‘get it’." },
      { id: 28, e:"clarity",   t:"I’m comfortable naming what’s important and what’s not." },
      { id: 29, e:"clarity",   t:"I cut through noise and make the next step obvious." },
      { id: 30, e:"clarity",   t:"I bring direction when people feel unclear." },

      // Connection (10)
      { id: 31, e:"connection",t:"I notice how people are feeling and take it seriously." },
      { id: 32, e:"connection",t:"I create space for people to speak honestly." },
      { id: 33, e:"connection",t:"I build trust by listening properly." },
      { id: 34, e:"connection",t:"I’m patient with people who need time to think." },
      { id: 35, e:"connection",t:"I help people feel safe enough to be real." },
      { id: 36, e:"connection",t:"I adapt my approach depending on who I’m with." },
      { id: 37, e:"connection",t:"I’m curious about what’s going on underneath the surface." },
      { id: 38, e:"connection",t:"I build commitment by involving people in the ‘how’." },
      { id: 39, e:"connection",t:"I look for what people need, not just what they deliver." },
      { id: 40, e:"connection",t:"I create belonging and connection in teams." },
    ];

    const answers = {}; // id -> 1..5

    // ============================================================
    // Content library (by dominant energy)
    // ============================================================
    const CONTENT = {
      command: {
        bestTitle: "Command at your best",
        best: [
          "You bring decisiveness when others hesitate.",
          "You protect standards and address issues quickly.",
          "You create momentum when the pace slows.",
          "You help people face reality without drama."
        ],
        watchTitle: "Command watchouts",
        watch: [
          "You may push too hard and lose people’s buy-in.",
          "You can become blunt when you’re under pressure.",
          "You may move so fast others can’t keep up.",
          "You might assume clarity exists because you feel certain."
        ],
        pressure: "Under pressure, you may default to action, urgency and directness. That can be helpful, but it can also feel like intensity to others. Your growth edge is to add Connection and Clarity before you push for the next step.",
        reset: "Reset routine (60 seconds): Pause. Name the outcome. Ask one real question. Then choose the smallest next action."
      },
      control: {
        bestTitle: "Control at your best",
        best: [
          "You create stability, reliability and follow-through.",
          "You reduce risk and prevent avoidable rework.",
          "You make work feel manageable through structure.",
          "You help teams stay organised and focused."
        ],
        watchTitle: "Control watchouts",
        watch: [
          "You may over-structure and reduce autonomy.",
          "You might default to process when the issue is people.",
          "You can become cautious or slow to act.",
          "You may struggle with ambiguity or experimentation."
        ],
        pressure: "Under pressure, you may tighten structure, process and detail. That can stabilise delivery, but it can also slow decisions and reduce ownership. Your growth edge is to add Clarity and Connection, not just more control.",
        reset: "Reset routine (60 seconds): Pause. Name what matters. Ask one real question. Then decide your next move."
      },
      clarity: {
        bestTitle: "Clarity at your best",
        best: [
          "You make purpose and priorities simple.",
          "You cut through noise and name what matters.",
          "You create alignment by communicating the ‘why’.",
          "You help teams turn goals into action."
        ],
        watchTitle: "Clarity watchouts",
        watch: [
          "You may over-focus on direction and under-focus on emotion.",
          "You can assume understanding when people are overwhelmed.",
          "You might sell the vision but miss the support needed.",
          "You may rush to conclusions without listening fully."
        ],
        pressure: "Under pressure, you may push for direction, priorities and alignment. That can cut through noise. The risk is explaining more, listening less, and missing what people need emotionally to move forward. Your growth edge is to practise Connection and Control when stakes rise.",
        reset: "Reset routine (60 seconds): Pause. Ask: “What are you hearing and feeling?” Then choose one priority and one next step."
      },
      connection: {
        bestTitle: "Connection at your best",
        best: [
          "You build trust and psychological safety.",
          "You create space for honesty and real conversation.",
          "You sense what’s unsaid and bring it into the room.",
          "You increase commitment by involving people."
        ],
        watchTitle: "Connection watchouts",
        watch: [
          "You may avoid tension to keep harmony.",
          "You can over-accommodate and lose direction.",
          "You may carry others’ emotions as your responsibility.",
          "You might delay decisions to protect relationships."
        ],
        pressure: "Under pressure, you may focus on harmony, reassurance and belonging. That can keep people steady. The risk is drifting, delaying decisions, or holding back what needs to be said. Your growth edge is to add Command and Clarity when it matters.",
        reset: "Reset routine (60 seconds): Pause. Name the truth kindly. Ask: “What do we need to decide?” Then take one direct step."
      }
    };

    // Leadership Approach mapping
    const APPROACH_MAP = {
      "command|control": { label:"Manage", focus:"Results", watch:"If you try to manage everything, it will swallow your time and people won’t truly own the work.", build:"Deliberately invite ownership and decision-making from others." },
      "command|clarity": { label:"Inspire", focus:"Purpose", watch:"If you live here too long, people grow impatient for the plan, measures and follow-through.", build:"Add structure, roles and simple check-ins." },
      "clarity|connection": { label:"Lead", focus:"People", watch:"If you dwell here, you may lose grip on results, pace and operational security.", build:"Add standards, priorities and clear ‘done’ definitions." },
      "connection|control": { label:"Guide", focus:"Performance", watch:"Stay here too long and you can build performance systems that lose attachment to the bigger picture.", build:"Re-anchor the ‘why’, vision and meaning behind the work." }
    };

    const BALANCED_SPREAD_MAX = 12;     // percent points
    const TENSION_SPREAD_MIN  = 18;     // percent points for “opposite” tension callout

    // ============================================================
    // Render survey
    // ============================================================
    const qWrap = document.getElementById("questions");
    function renderQuestions(){
      qWrap.innerHTML = "";
      QUESTIONS.forEach((q, idx) => {
        const div = document.createElement("div");
        div.className = "q";
        div.innerHTML = `
          <p class="qtitle">${idx+1}. ${escapeHtml(q.t)}</p>
          <p class="qsub">Choose one option</p>
          <div class="scale">
            ${[1,2,3,4,5].map(v => `
              <label>
                <input type="radio" name="q${q.id}" value="${v}" />
                <div class="opt">${v}</div>
              </label>
            `).join("")}
          </div>
          <div class="mini" style="margin-top:8px;">1 = Strongly disagree · 5 = Strongly agree</div>
        `;
        qWrap.appendChild(div);

        // Wire radios
        div.querySelectorAll(`input[name="q${q.id}"]`).forEach(inp => {
          inp.addEventListener("change", () => {
            answers[q.id] = Number(inp.value);
            updateProgress();
          });
        });
      });
    }

    function updateProgress(){
      const answered = Object.keys(answers).length;
      const total = QUESTIONS.length;
      document.getElementById("progressText").textContent = `${answered} / ${total} answered`;
      document.getElementById("progressBar").style.width = `${Math.round((answered/total)*100)}%`;
    }

    // ============================================================
    // Scoring + profile logic
    // ============================================================
    function calcProfile(){
      const sums = { command:0, control:0, clarity:0, connection:0 };
      const counts = { command:0, control:0, clarity:0, connection:0 };

      QUESTIONS.forEach(q => {
        const v = answers[q.id] || 0;
        sums[q.e] += v;
        counts[q.e] += 1;
      });

      // Total possible per energy: 10..50
      const pct = {};
      ENERGIES.forEach(e => {
        const min = counts[e]*1;
        const max = counts[e]*5;
        const raw = sums[e];
        const p = ((raw - min) / (max - min)) * 100; // 0..100
        pct[e] = Math.round(p);
      });

      // Ranking
      const ranked = [...ENERGIES].sort((a,b) => pct[b]-pct[a]);
      const primary = ranked[0];
      const secondary = ranked[1];
      const underused = ranked[3];

      const maxPct = pct[ranked[0]];
      const minPct = pct[ranked[3]];
      const spread = maxPct - minPct;
      const balance = clamp(100 - spread, 0, 100);

      // Leadership Approach label logic
      const pair = [primary, secondary].sort().join("|");
      const isBalanced = (spread <= BALANCED_SPREAD_MAX) || (balance >= 80);

      const oppositePair = (pair === "clarity|control" || pair === "command|connection");
      let approach = { label:"Blended", focus:"Flex", watch:"", build:"" };
      let mode = "blended";

      if(isBalanced){
        mode = "flexible";
        approach = {
          label:"Flexible",
          focus:"Choice",
          watch:"A balanced profile usually means range. The watchout is drifting into autopilot because you can do lots of things reasonably well.",
          build:"Choose the energy the situation needs, rather than the one you prefer in the moment."
        };
      } else if(APPROACH_MAP[pair]) {
        mode = "named";
        approach = APPROACH_MAP[pair];
      } else if(oppositePair && spread >= TENSION_SPREAD_MIN) {
        mode = "tension";
        approach = {
          label:"Tension Pair",
          focus:"Switching",
          watch:"Your top two energies pull in different directions. This can show up as switching styles quickly, or over-correcting. It can also be a sign of ‘people-pleasing’ answers.",
          build:"Make your shift visible. Say what you’re doing and why. Keep one steady anchor (purpose or standards) while you flex your style."
        };
      } else {
        mode = "blended";
        approach = {
          label:"Blended",
          focus:"Mix",
          watch:"Your top two energies don’t map neatly to one named approach. That often means a mixed style or a context-dependent preference.",
          build:"Use your dominant energy intentionally, then practise your underused one in small moments."
        };
      }

      return {
        pct, sums,
        ranked,
        primary, secondary, underused,
        spread, balance,
        approach, mode
      };
    }

    // ============================================================
    // Report rendering
    // ============================================================
    function renderReport(profile){
      // Meta
      const name = (document.getElementById("name").value || "").trim();
      const date = new Date().toLocaleDateString("en-GB");
      const bal = profile.balance;

      document.getElementById("meta").textContent =
        `${name ? name + " · " : ""}Date: ${date} · Balance score: ${bal}/100`;

      // Snapshot text
      const nice = (s) => s.charAt(0).toUpperCase() + s.slice(1);
      const snap = `
        <b>Dominant energy:</b> ${nice(profile.primary)}. <b>Secondary energy:</b> ${nice(profile.secondary)}.<br>
        <b>Underused energy:</b> ${nice(profile.underused)}.<br>
        <b>Leadership Approach:</b> ${profile.approach.label} ${profile.mode==="named" ? `(${profile.approach.focus})` : ""}.
      `;
      document.getElementById("snapshot").innerHTML = snap;

      // Bars
      setBar("Command", profile.pct.command);
      setBar("Control", profile.pct.control);
      setBar("Clarity", profile.pct.clarity);
      setBar("Connection", profile.pct.connection);

      // Balance note
      const balanceNote = document.getElementById("balanceNote");
      if(profile.mode === "flexible"){
        balanceNote.innerHTML = `<b>Balance note:</b> your energies are relatively even. That usually means flexibility. Your next step is to choose the right energy more consciously, rather than automatically.`;
      } else if(profile.mode === "tension"){
        balanceNote.innerHTML = `<b>Balance note:</b> your top energies pull in different directions. If that feels true, treat it as a signal to slow down, name the shift, and choose one clear anchor (purpose or standards).`;
      } else {
        balanceNote.innerHTML = `<b>Balance note:</b> your preferences are clearer. Your best leadership usually comes from blending your dominant and secondary energies, while intentionally practising your underused one.`;
      }

      // Energy-specific content
      const c = CONTENT[profile.primary];
      document.getElementById("bestTitle").textContent = c.bestTitle;
      renderList("bestList", c.best);

      document.getElementById("watchTitle").textContent = c.watchTitle;
      renderList("watchList", c.watch);

      document.getElementById("pressureText").textContent = c.pressure;
      document.getElementById("resetRoutine").innerHTML = `<b>${escapeHtml(c.reset.split(":")[0])}:</b> ${escapeHtml(c.reset.split(":").slice(1).join(":").trim())}`;

      // Leadership Approach line + Coach guidance box
      const approachLine = document.getElementById("approachLine");
      if(profile.mode === "named"){
        approachLine.textContent = `Leadership Approach: ${profile.approach.label} ${profile.approach.focus ? "· Focus: " + profile.approach.focus : ""}.`;
      } else {
        approachLine.textContent = `Leadership Approach: ${profile.approach.label}.`;
      }

      const coachBox = document.getElementById("coachBox");
      const under = nice(profile.underused);

      const guidance = buildGuidance(profile);
      coachBox.innerHTML = `
        <div><b>Mindset:</b> ${escapeHtml(guidance.mindset)}</div>
        <div><b>Toolset:</b> ${escapeHtml(guidance.toolset)}</div>
        <div><b>Skillset:</b> ${escapeHtml(guidance.skillset)}</div>
        <div style="margin-top:8px;"><span class="mini"><b>Underused energy practice:</b> ${escapeHtml(guidance.practice.replace("{UNDER}", under))}</span></div>
        <div style="margin-top:10px;" class="mini"><b>Watchout:</b> ${escapeHtml(profile.approach.watch)}</div>
        <div class="mini" style="margin-top:6px;"><b>Build this by:</b> ${escapeHtml(profile.approach.build)}</div>
      `;

      // 30-day plan
      document.getElementById("plan").innerHTML = buildPlan(profile);

      // Radar
      drawRadar(profile.pct);

      // Show report
      document.getElementById("report").style.display = "block";
      document.getElementById("jumpReport").style.display = "inline-block";

      // Scroll
      document.getElementById("report").scrollIntoView({behavior:"smooth"});

      // Save for export
      LAST_PROFILE = profile;
      LAST_EXPORT = buildExport(profile, name, date);

      // Wire report buttons
      wireReportButtons();
    }

    function buildGuidance(profile){
      // Core guidance based on approach label + underused
      if(profile.mode === "named"){
        switch(profile.approach.label){
          case "Manage":
            return {
              mindset: "Shift from “If I control it, it will work” to “If I involve them, they’ll own it.”",
              toolset: "Use a light rhythm: priorities, progress, blockers, next step. Keep it short and consistent.",
              skillset: "Hold standards with calm clarity: one clear ask, one deadline, one measure.",
              practice: "Build {UNDER} with one small behaviour change this week. Ask one coaching question before you direct."
            };
          case "Inspire":
            return {
              mindset: "Shift from “If I explain it well, they’ll follow” to “If we co-create it, they’ll commit.”",
              toolset: "Ask: “What does success look like in 2 weeks?” then agree 1–2 measures and a check-in date.",
              skillset: "Inspire, then land it: translate purpose into priorities and next steps.",
              practice: "Build {UNDER} by adding one practical structure: roles, measures, or a simple check-in rhythm."
            };
          case "Lead":
            return {
              mindset: "Shift from “People will follow if they feel safe” to “People follow when safety and direction exist together.”",
              toolset: "Use: “What matters most?” then “What will we stop doing?” to protect focus.",
              skillset: "Create alignment: clear purpose, honest conversation, shared priorities.",
              practice: "Build {UNDER} by setting one firm boundary: a decision, a standard, or a clear ‘done’ definition."
            };
          case "Guide":
            return {
              mindset: "Shift from “Keep it steady” to “Keep it steady while we raise the bar.”",
              toolset: "Use a performance check-in: what’s working, what’s stuck, what support is needed, what’s next.",
              skillset: "Guide with precision: supportive challenge, clear measures, visible follow-through.",
              practice: "Build {UNDER} by re-anchoring the ‘why’: name purpose, meaning, and the bigger picture once this week."
            };
        }
      }

      if(profile.mode === "tension"){
        return {
          mindset: "Shift from “I have to get it right for everyone” to “I can choose one clear anchor, then flex.”",
          toolset: "Name the switch: “I’m going to be direct for 2 minutes, then I’ll come back to questions.”",
          skillset: "Practise visible transitions: signal intent, then act.",
          practice: "Build {UNDER} with one small habit: pause, ask one real question, then decide the next step."
        };
      }

      // Flexible / Blended
      return {
        mindset: "Shift from “I’ll use what’s natural” to “I’ll choose what this moment needs.”",
        toolset: "Ask: “What’s most important here?” then “What would good look like by Friday?”",
        skillset: "Practise concise leadership: one message, one priority, one next step.",
        practice: "Build {UNDER} with one small behaviour change this week. You don’t need a personality transplant. You need a practical habit."
      };
    }

    function buildPlan(profile){
      const p = profile.primary;
      const under = titleCase(profile.underused);

      // Small, practical week-by-week. Slightly adapt based on dominant.
      const week1 = (p==="command") ? "Choose one situation where you’ll slow down and ask one question before you act."
                  : (p==="control") ? "Choose one situation where you’ll invite ownership instead of adding structure yourself."
                  : (p==="clarity") ? "Choose one situation where you’ll check emotion before you explain the plan."
                  : "Choose one situation where you’ll be more direct and name the decision needed.";

      const week2 = "Write one simple behaviour you will repeat twice this week. Example: one extra question, one clear measure, one direct request, one short check-in.";
      const week3 = "Ask for feedback from one person: “What did you notice about my style this week? What helped? What didn’t?”";
      const week4 = `Blend your dominant energy with your underused (${under}): choose one real leadership moment and deliberately do both. Lead with your strength, then add the missing energy.`;

      const reflect = "Reflection: Where did I lead with intention this week, and where did I default under pressure?";
      const tip = "Keep it small. One behaviour. One situation. One week. Consistency beats intensity.";

      return `
        <h3>Week-by-week</h3>
        <ul>
          <li><b>Week 1:</b> ${escapeHtml(week1)}</li>
          <li><b>Week 2:</b> ${escapeHtml(week2)}</li>
          <li><b>Week 3:</b> ${escapeHtml(week3)}</li>
          <li><b>Week 4:</b> ${escapeHtml(week4)}</li>
        </ul>
        <p class="mini" style="margin-top:10px;"><b>Weekly reflection question:</b> ${escapeHtml(reflect)}</p>
        <p class="mini"><b>Coach Approach tip:</b> ${escapeHtml(tip)}</p>
      `;
    }

    // ============================================================
    // Radar chart
    // ============================================================
    function drawRadar(pct){
      const canvas = document.getElementById("radar");
      const ctx = canvas.getContext("2d");
      const w = canvas.width, h = canvas.height;
      ctx.clearRect(0,0,w,h);

      // Scale with padding
      const cx = w/2, cy = h/2;
      const r = Math.min(w,h)*0.34;

      // Grid
      ctx.lineWidth = 1;
      ctx.strokeStyle = "rgba(255,255,255,.14)";
      ctx.fillStyle = "rgba(255,255,255,.10)";

      const rings = 4;
      for(let i=1;i<=rings;i++){
        const rr = (r*i)/rings;
        polygon(ctx, cx, cy, rr, 4, -Math.PI/2, false);
      }

      // Axes labels
      const labels = ["Command","Control","Clarity","Connection"];
      const keys = ["command","control","clarity","connection"];
      ctx.fillStyle = "rgba(255,255,255,.70)";
      ctx.font = "600 13px " + getComputedStyle(document.documentElement).getPropertyValue("--sans");

      for(let i=0;i<4;i++){
        const ang = -Math.PI/2 + i*(Math.PI/2);
        const lx = cx + Math.cos(ang)*(r+34);
        const ly = cy + Math.sin(ang)*(r+34);
        ctx.textAlign = (i===1) ? "left" : (i===3) ? "right" : "center";
        ctx.textBaseline = "middle";
        ctx.fillText(labels[i], lx, ly);
      }

      // Data shape
      const pts = [];
      for(let i=0;i<4;i++){
        const v = clamp(pct[keys[i]]/100, 0, 1);
        const ang = -Math.PI/2 + i*(Math.PI/2);
        pts.push([cx + Math.cos(ang)*(r*v), cy + Math.sin(ang)*(r*v)]);
      }

      // Fill
      ctx.beginPath();
      pts.forEach((p, idx) => {
        if(idx===0) ctx.moveTo(p[0], p[1]);
        else ctx.lineTo(p[0], p[1]);
      });
      ctx.closePath();
      ctx.fillStyle = "rgba(255,138,0,.22)";
      ctx.fill();
      ctx.strokeStyle = "rgba(255,138,0,.95)";
      ctx.lineWidth = 2;
      ctx.stroke();

      // Points
      ctx.fillStyle = "rgba(255,138,0,.95)";
      pts.forEach(p=>{
        ctx.beginPath();
        ctx.arc(p[0], p[1], 4, 0, Math.PI*2);
        ctx.fill();
      });
    }

    function polygon(ctx, cx, cy, r, sides, rotation, fill){
      ctx.beginPath();
      for(let i=0;i<sides;i++){
        const a = rotation + i*(Math.PI*2/sides);
        const x = cx + Math.cos(a)*r;
        const y = cy + Math.sin(a)*r;
        if(i===0) ctx.moveTo(x,y);
        else ctx.lineTo(x,y);
      }
      ctx.closePath();
      if(fill) ctx.fill();
      ctx.stroke();
    }

    // ============================================================
    // Export + Summary
    // ============================================================
    let LAST_PROFILE = null;
    let LAST_EXPORT = null;

    function buildExport(profile, name, date){
      return {
        generated_at: new Date().toISOString(),
        date_display: date,
        name: name || null,
        balance_score: profile.balance,
        spread: profile.spread,
        energies_pct: profile.pct,
        ranking: {
          dominant: profile.primary,
          secondary: profile.secondary,
          underused: profile.underused
        },
        leadership_approach: {
          mode: profile.mode,
          label: profile.approach.label,
          focus: profile.approach.focus || null,
          watchout: profile.approach.watch || null,
          build: profile.approach.build || null
        },
        answers: Object.fromEntries(Object.entries(answers).map(([k,v]) => [k, v]))
      };
    }

    function summaryText(profile){
      const nice = titleCase;
      const name = (document.getElementById("name").value || "").trim();
      const line1 = `${name ? name + " – " : ""}Leadership Profile Summary`;
      const line2 = `Dominant: ${nice(profile.primary)}. Secondary: ${nice(profile.secondary)}. Underused: ${nice(profile.underused)}.`;
      const line3 = `Balance score: ${profile.balance}/100. Leadership Approach: ${profile.approach.label}${profile.mode==="named" ? " ("+profile.approach.focus+")" : ""}.`;
      const line4 = `Next step: practise your underused energy in one small moment this week.`;
      return [line1, line2, line3, line4].join("\n");
    }

    function copySummary(){
      if(!LAST_PROFILE) return;
      const txt = summaryText(LAST_PROFILE);
      if(navigator.clipboard && navigator.clipboard.writeText){
        navigator.clipboard.writeText(txt).catch(()=>{});
      } else {
        // Fallback
        prompt("Copy summary:", txt);
      }
    }

    function exportResults(){
      if(!LAST_EXPORT) return;

      const json = JSON.stringify(LAST_EXPORT, null, 2);

      // Try download
      try{
        const blob = new Blob([json], {type:"application/json;charset=utf-8"});
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "coach-approach-results.json";
        document.body.appendChild(a);
        a.click();
        a.remove();
        setTimeout(()=>URL.revokeObjectURL(url), 900);
        return;
      }catch(e){}

      // Fallback new tab
      const w = window.open("", "_blank", "noopener");
      if(!w){ return; }
      w.document.open();
      w.document.write(
        "<!doctype html><html><head><meta charset='utf-8'><title>Export Results Data</title>" +
        "<style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;padding:18px;background:#071624;color:#fff}textarea{width:100%;height:80vh;font-family:" + "'" + "ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace" + "'" + ";font-size:12px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.3);color:#fff;padding:12px;}</style>" +
        "</head><body><h2>Export Results Data</h2><p>Copy the data below. This is your results export.</p>" +
        "<textarea readonly>" + json.replace(/</g,"&lt;") + "</textarea></body></html>"
      );
      w.document.close();
    }

    function wireReportButtons(){
      const printTop = document.getElementById("printBtnTop");
      const copyTop  = document.getElementById("copyBtnTop");
      const expTop   = document.getElementById("exportBtnTop");
      const printBottom = document.getElementById("printBtnBottom");
      const copyBottom  = document.getElementById("copyBtnBottom");
      const expBottom   = document.getElementById("exportBtnBottom");

      if(printTop) printTop.onclick = () => window.print();
      if(printBottom) printBottom.onclick = () => window.print();
      if(copyTop) copyTop.onclick = () => copySummary();
      if(copyBottom) copyBottom.onclick = () => copySummary();
      if(expTop) expTop.onclick = () => exportResults();
      if(expBottom) expBottom.onclick = () => exportResults();
    }

    // ============================================================
    // Helpers
    // ============================================================
    function renderList(id, items){
      const ul = document.getElementById(id);
      ul.innerHTML = "";
      items.forEach(t=>{
        const li = document.createElement("li");
        li.textContent = t;
        ul.appendChild(li);
      });
    }

    function setBar(label, pct){
      const map = {
        Command: ["barCommand","pctCommand"],
        Control: ["barControl","pctControl"],
        Clarity: ["barClarity","pctClarity"],
        Connection: ["barConnection","pctConnection"]
      };
      const [barId, pctId] = map[label];
      document.getElementById(barId).style.width = pct + "%";
      document.getElementById(pctId).textContent = pct + "%";
    }

    function clamp(n,min,max){ return Math.max(min, Math.min(max, n)); }
    function titleCase(s){ return s.charAt(0).toUpperCase() + s.slice(1); }
    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, m => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
      }[m]));
    }

    // ============================================================
    // Events
    // ============================================================
    const buildBtn = document.getElementById("build");
    const buildBtn2 = document.getElementById("build2");
    const warnEl = document.getElementById("warn");

    function attemptBuild(){
      if(Object.keys(answers).length !== QUESTIONS.length){
        warnEl.style.display = "block";
        warnEl.scrollIntoView({behavior:"smooth", block:"center"});
        return;
      }
      warnEl.style.display = "none";
      const profile = calcProfile();
      renderReport(profile);
    }

    buildBtn.addEventListener("click", attemptBuild);
    buildBtn2.addEventListener("click", attemptBuild);

    document.getElementById("jumpReport").addEventListener("click", () => {
      document.getElementById("report").scrollIntoView({behavior:"smooth"});
    });

    document.getElementById("backTop").addEventListener("click", (e) => {
      e.preventDefault();
      document.getElementById("app").scrollIntoView({behavior:"smooth"});
    });

    document.getElementById("reset").addEventListener("click", () => {
      // clear answers + radios
      for(const k of Object.keys(answers)) delete answers[k];
      document.querySelectorAll("input[type=radio]").forEach(i => i.checked = false);
      updateProgress();
      document.getElementById("report").style.display = "none";
      document.getElementById("jumpReport").style.display = "none";
      warnEl.style.display = "none";
      LAST_PROFILE = null;
      LAST_EXPORT = null;
      document.getElementById("app").scrollIntoView({behavior:"smooth"});
    });

    // Init
    renderQuestions();
    updateProgress();
  </script>
</body>
</html>
